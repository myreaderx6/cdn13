
<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
	<meta charset="UTF-8">
	<link rel="icon" href="https://cdc.tencent.com/wp-content/themes/cdc10th/favicon.ico" type="image/ico"/>
	<meta name="Description" content="腾讯CDC是一个设计团队，做世界一流的互联网设计团队，为用户创造优质在线生活体验。CDC关注于互联网视觉设计、交互设计、用户研究、前端开发。" />
	<meta name="Keywords" content="cdc,blog,tencent design,tencent gui,tencent hci,tencent web" />
	<meta id="author" content="Tencent CDC Team" />
	<meta id="Copyright" content="Copyright 1998-2021 Tencent Inc. All Rights Reserved" />
	<meta name="format-detection" content="telephone=no">
	<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta name="verify-v1" content="eyIb7IlkT8vAK51fYxVlQPTG9xQWrF5dzXDyk6x7gMM=" />
	<meta property="qc:admins" content="3065336343645635646375" />
	<link rel="pingback" href="https://cdc.tencent.com/xmlrpc.php">

	<link rel="stylesheet" href="https://cdc.tencent.com/wp-content/themes/cdc10th/css/main.css">
	<link rel="stylesheet" href="https://cdc.tencent.com/wp-content/themes/cdc10th/css/swiper.min.css">
	<script src="https://cdc.tencent.com/wp-content/themes/cdc10th/js/src/jquery-1.12.3.min.9327.js"></script>
	<title>觅迹寻踪之正则表达式 &#8211; 腾讯CDC</title>
<meta name='robots' content='max-image-preview:large' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="腾讯CDC &raquo; 觅迹寻踪之正则表达式评论Feed" href="https://cdc.tencent.com/2021/06/22/%e8%a7%85%e8%bf%b9%e5%af%bb%e8%b8%aa%e4%b9%8b%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.0.1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.0.1\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/cdc.tencent.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.7.2"}};
			!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){var a=String.fromCharCode;p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,e),0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,t),0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(!p||!p.fillText)return!1;switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])?!1:!s([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!s([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]);case"emoji":return!s([55357,56424,8205,55356,57212],[55357,56424,8203,55356,57212])}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(n=t.source||{}).concatemoji?c(n.concatemoji):n.wpemoji&&n.twemoji&&(c(n.twemoji),c(n.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel='stylesheet' id='wp-block-library-css'  href='https://cdc.tencent.com/wp-includes/css/dist/block-library/style.min.css?ver=5.7.2' type='text/css' media='all' />
<link rel="https://api.w.org/" href="https://cdc.tencent.com/wp-json/" /><link rel="alternate" type="application/json" href="https://cdc.tencent.com/wp-json/wp/v2/posts/11482" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://cdc.tencent.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://cdc.tencent.com/wp-includes/wlwmanifest.xml" /> 
<link rel="canonical" href="https://cdc.tencent.com/2021/06/22/%e8%a7%85%e8%bf%b9%e5%af%bb%e8%b8%aa%e4%b9%8b%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f/" />
<link rel='shortlink' href='https://cdc.tencent.com/?p=11482' />
<link rel="alternate" type="application/json+oembed" href="https://cdc.tencent.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fcdc.tencent.com%2F2021%2F06%2F22%2F%25e8%25a7%2585%25e8%25bf%25b9%25e5%25af%25bb%25e8%25b8%25aa%25e4%25b9%258b%25e6%25ad%25a3%25e5%2588%2599%25e8%25a1%25a8%25e8%25be%25be%25e5%25bc%258f%2F" />
<link rel="alternate" type="text/xml+oembed" href="https://cdc.tencent.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fcdc.tencent.com%2F2021%2F06%2F22%2F%25e8%25a7%2585%25e8%25bf%25b9%25e5%25af%25bb%25e8%25b8%25aa%25e4%25b9%258b%25e6%25ad%25a3%25e5%2588%2599%25e8%25a1%25a8%25e8%25be%25be%25e5%25bc%258f%2F&#038;format=xml" />
		<style type="text/css" id="wp-custom-css">
			/*
您可以在此处加入您的CSS。

点击上方的帮助图标来了解更多。
*/


		</style>
			<script>$ = jQuery;</script>
	<!--[if lt IE 10]>
		<link rel="stylesheet" href="https://cdc.tencent.com/wp-content/themes/cdc10th/css/ie.css"/>
	<![endif]-->
	<script src="//assets.adobedtm.com/launch-ENcebf21727597422daf93063125c20cf7.min.js"></script>
	<script src="https://cdn-go.cn/aegis/aegis-sdk/latest/aegis.min.js"></script>
	<script>
	const aegis = new Aegis({
		id: 'CNcUicpbKjXvQbeeUI', // 项目ID，即上报key
		reportApiSpeed: true, // 接口测速
		reportAssetSpeed: true // 静态资源测速
  	});	
	</script>
</head>
<body>
<!--[if lt IE 10]>
<div class="alert-danger" role="alert">你的浏览器实在太太太太太太旧了，放学别走，升级完浏览器再说！<a target="_blank" class="alert-link" href="http://browsehappy.com">立即升级</a></div>
<![endif]-->
<body class="have_search">
<div class="g-header">
	<div class="g-container">
		<div class="g-logo">
			<a href="https://cdc.tencent.com">腾讯CDC</a>
		</div>
		<div class="g-nav"><ul id="menu-index_nav"><li id="menu-item-8925" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-8925"><a href="http://cdc.tencent.com/">首页</a></li>
<li id="menu-item-8930" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-8930"><a href="#">工具</a>
<ul class="sub-menu">
	<li id="menu-item-8931" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8931"><a target="_blank" rel="noopener" href="http://wj.qq.com">腾讯问卷</a></li>
	<li id="menu-item-8932" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8932"><a target="_blank" rel="noopener" href="http://idesign.qq.com">设计导航</a></li>
	<li id="menu-item-11196" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-11196"><a href="https://txc.qq.com/">腾讯兔小巢</a></li>
	<li id="menu-item-11417" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-11417"><a href="https://codesign.qq.com/?utm_source=cdc&#038;utm_medium=navbar">腾讯设计协作</a></li>
</ul>
</li>
<li id="menu-item-8929" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8929"><a href="https://cdc.tencent.com/about/">我们</a></li>
<li id="menu-item-9050" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-9050"><a href="https://cdc.tencent.com/%e6%8b%9b%e8%81%98/">招聘</a></li>
</ul></div>		<div class="g-info">
			<ul class="g-follow">
				<li class="wechat">
					<a href="javascript:;">
						<i class="icon"></i>
						<span>CDC官方公众号</span>
					</a>
					<div class="wechat-qr">
						<img src="https://cdc.tencent.com/wp-content/themes/cdc10th/images/wechat-qr-code.png" alt="CDC官方公众号"/>
						<p>CDC官方公众号</p>
					</div>
				</li>
				<li class="rss">
					<a target="_blank" href="https://cdc.tencent.com/feed/rss/">
						<i class="icon"></i>
						<span>RSS</span>
					</a>
				</li>
			</ul>
			<div class="g-search">
				<button class="search-trigger" type="button" title="搜索">搜索</button>
				<div class="search-box">
					<div class="search-form">
						<button class="search-submit">搜索</button>
						<input type="text" class="search-input" placeholder="请输入想要搜索的内容"/>
						<button class="search-close">关闭</button>
					</div>
					<div class="search-suggest">
						<!-- <p class="title">历史搜索：</p> -->
						<ul>
														<li><a href="https://cdc.tencent.com/?tag=%E8%A7%86%E8%A7%89%E8%AE%BE%E8%AE%A1">视觉设计</a></li>
														<li><a href="https://cdc.tencent.com/?tag=%E4%BA%A4%E4%BA%92%E8%AE%BE%E8%AE%A1">交互设计</a></li>
														<li><a href="https://cdc.tencent.com/?tag=%E7%94%A8%E6%88%B7%E7%A0%94%E7%A9%B6">用户研究</a></li>
														<li><a href="https://cdc.tencent.com/?tag=%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91">前端开发</a></li>
													</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>


<div class="article-page g-container">
		<div class="article-details">
		
<!--== 文章内容 ==-->
<div class="content-details">
	<div class="content-title">
		<h3>觅迹寻踪之正则表达式</h3>
		<a href="https://cdc.tencent.com?cdc_author=CDCer" class="avatar"><img src="https://cdc.tencent.com/wp-content/plugins/cdc/static/img/no_avater.png" alt="CDCer"></a>
		<p>
			<span><!-- <a href="https://cdc.tencent.com?cdc_author=CDCer"> -->CDCer<!-- </a> --></span>
			2021.06.22		</p>
		<ul>
			<li class="count-browse"><span>10026</span></li>
			<li class="count-like"><span>2</span></li>
			<li class="count-comment"><span>0</span></li>
		</ul>
	</div>
	<div class="content-banner">
		<img src="//cdc.tencent.com/wp-content/uploads/2021/06/carbon.png" alt="">
	</div>
	<div class="content-text">
		<div id="js_article" class="rich_media">
<div class="rich_media_inner">
<div id="page-content" class="rich_media_area_primary">
<div class="rich_media_area_primary_inner">
<div id="img-content" class="rich_media_wrp">
<h2 id="activity-name" class="rich_media_title">觅迹寻踪之正则表达式</h2>
<div id="meta_content" class="rich_media_meta_list"><span id="copyright_logo" class="rich_media_meta icon_appmsg_tag appmsg_title_tag">原创</span> <span class="rich_media_meta rich_media_meta_text">腾讯CDC</span> <span id="profileBt" class="rich_media_meta rich_media_meta_nickname">腾讯CDC体验设计 </span> <em id="publish_time" class="rich_media_meta rich_media_meta_text">4月28日</em></div>
<div id="js_content" class="rich_media_content ">
<h1 data-lines="2" data-sign="a550988392012741b05598a97197bf3412"><strong>灵魂拷问</strong></h1>
<section>成功骗你点进来，准备好学习新知识了吗？ </section>
<p>“应该是没有”</p>
<section>不知道你有没有听过，正则匹配。它的使用场景是什么？ </section>
<p>“在多个文本中，找到 【我最帅】”</p>
<p>这篇是原理篇，可能有点晦涩。</p>
<h1 data-lines="2" data-sign="8e1b944f4389bdaab6f11d5bc83190c812"><strong>背景</strong></h1>
<p>把 正则表达式 理解为一门编程语言，那它可能会有 解析引擎 和 执行引擎。</p>
<p>希望通过介绍正则表达式的执行引擎，了解其实现原理，能帮助大家写出更优雅的正则表达式。</p>
<p><a href="http://cdc.tencent.com/2021/06/22/%e8%a7%85%e8%bf%b9%e5%af%bb%e8%b8%aa%e4%b9%8b%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f/640-30/" rel="attachment wp-att-11535"><img loading="lazy" class=" wp-image-11535 alignnone" src="http://cdc.tencent.com/wp-content/uploads/2021/06/640-21.png" alt="" width="155" height="161" /></a></p>
<h1 data-lines="2" data-sign="7d4af3f66eb090f4c976604a597da1e912"><strong>执行引擎</strong></h1>
<section>正则表达式的执行引擎主要分为两个大类：</section>
<ol class="list-paddingleft-2" start="1" data-lines="2" data-sign="1ad2f45b27dbdb45824fd1025c387e18list2">
<li>
<section><code>DFA (Deterministic finite automaton)</code> 确定型有穷自动机</section>
</li>
<li>
<section><code>NFA (Non-deterministic finite automaton)</code> 非确定型有穷自动机</section>
</li>
</ol>
<section>其中：<br />
1. NFA 中可以再进行细分，分为 POSIX NFA 和 Traditional NFA<br />
2. 还有些程序支持 DFA 和 NFA 混合体</section>
<section>整理为表格如下：</section>
</div>
<section>      <a href="http://cdc.tencent.com/2021/06/22/%e8%a7%85%e8%bf%b9%e5%af%bb%e8%b8%aa%e4%b9%8b%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f/%e4%bc%81%e4%b8%9a%e5%be%ae%e4%bf%a1%e6%88%aa%e5%9b%be_ff52b74f-431b-440c-ae77-9e80c5987917/" rel="attachment wp-att-11483"><img loading="lazy" class=" wp-image-11483 alignnone" src="http://cdc.tencent.com/wp-content/uploads/2021/06/企业微信截图_ff52b74f-431b-440c-ae77-9e80c5987917.png" alt="" width="478" height="206" srcset="https://cdc.tencent.com/wp-content/uploads/2021/06/企业微信截图_ff52b74f-431b-440c-ae77-9e80c5987917.png 1080w, https://cdc.tencent.com/wp-content/uploads/2021/06/企业微信截图_ff52b74f-431b-440c-ae77-9e80c5987917-768x331.png 768w" sizes="(max-width: 478px) 100vw, 478px" /></a></section>
<div id="js_content" class="rich_media_content ">
<section>&gt; 章节原因，FA,DFA,NFA 之间的关系，留待下一次叙述</section>
<h2 data-lines="2" data-sign="f9c561a1358f4580e1dc0d12e3d282a222"><strong>DFA 执行引擎</strong></h2>
<section><a href="http://cdc.tencent.com/2021/06/22/%e8%a7%85%e8%bf%b9%e5%af%bb%e8%b8%aa%e4%b9%8b%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f/640-3/" rel="attachment wp-att-11484"><img loading="lazy" class=" wp-image-11484 alignnone" src="http://cdc.tencent.com/wp-content/uploads/2021/06/640.gif" alt="" width="478" height="280" srcset="https://cdc.tencent.com/wp-content/uploads/2021/06/640.gif 1079w, https://cdc.tencent.com/wp-content/uploads/2021/06/640-768x450.gif 768w" sizes="(max-width: 478px) 100vw, 478px" /></a></section>
<section>由上可以得出，<code>DFA</code> 的特点：</section>
<p>1.先看文本，再看正则，<strong>以文本主导</strong></p>
<p>2.编译完表达式后，还需要遍历出表达式中所有的可能</p>
<p>3.匹配过程，字符串只看一次</p>
<h2 data-lines="2" data-sign="79b7d95d7a6d04da730d5028b1aa945222"><strong>NFA 执行引擎</strong></h2>
<section>&gt; 文中的 <code>NFA</code> ，指的都是 <code>Traditional NFA</code></section>
<p><a href="http://cdc.tencent.com/2021/06/22/%e8%a7%85%e8%bf%b9%e5%af%bb%e8%b8%aa%e4%b9%8b%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f/640-4/" rel="attachment wp-att-11485"><img loading="lazy" class=" wp-image-11485 alignnone" src="http://cdc.tencent.com/wp-content/uploads/2021/06/640-1.gif" alt="" width="480" height="280" srcset="https://cdc.tencent.com/wp-content/uploads/2021/06/640-1.gif 1079w, https://cdc.tencent.com/wp-content/uploads/2021/06/640-1-768x449.gif 768w" sizes="(max-width: 480px) 100vw, 480px" /></a></p>
<section>由上可以得出，<code>NFA</code> 的特点：</section>
<p>1.先看正则，再看文本，以正则主导</p>
<p>2.编译完表达式即完成</p>
<section>3.匹配过程中，可能会发生回退，字符串同一部分会比较多次 （通常将回退称为回溯）</section>
<h2 data-lines="2" data-sign="2dde23a60b57d596b5669834a191aeab22"><strong>敲重点</strong></h2>
<section><a href="http://cdc.tencent.com/2021/06/22/%e8%a7%85%e8%bf%b9%e5%af%bb%e8%b8%aa%e4%b9%8b%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f/640-5/" rel="attachment wp-att-11486"><img loading="lazy" class=" wp-image-11486 alignnone" src="http://cdc.tencent.com/wp-content/uploads/2021/06/640.png" alt="" width="554" height="142" srcset="https://cdc.tencent.com/wp-content/uploads/2021/06/640.png 1080w, https://cdc.tencent.com/wp-content/uploads/2021/06/640-768x197.png 768w" sizes="(max-width: 554px) 100vw, 554px" /></a><img class="rich_pages img_loading" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片" crossorigin="anonymous" data-galleryid="" data-ratio="0.25613802256138024" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/DKcPurxib9LygFkm16xzwt8fSmsfApubKD41HUYHRUdibpI8kfwxmCPZCHq462USy8JgcVfXicP1iaiaMgbzXFthffA/640?wx_fmt=png" data-type="png" data-w="1507" /></section>
<h2 data-lines="2" data-sign="7ccf55b97888a449b225aa5b046ce80e22"><strong>如何区分</strong></h2>
<section>如何区分 <code>Traditional NFA</code>, <code>POSIX NFA</code>, <code>DFA</code>, <code>DFA/NFA</code></section>
<ul class="list-paddingleft-2">
<li>第一步：</li>
</ul>
<p style="padding-left: 40px;">看是否支持 忽略优先量词。如果支持，基本就能确定是 <code>Traditional NFA</code></p>
<p style="padding-left: 40px;">正则表达式 <code>nfa|nfa.not</code>，文本 <code>nfa.not</code></p>
<section>          如果只匹配到 <code>nfa</code> ，基本就能确定是 <code>Traditional NFA</code></section>
<ul class="list-paddingleft-2">
<li>第二步：</li>
</ul>
<p style="padding-left: 40px;">看是否支持 捕获型括号 或者 回溯。如果支持，基本能确定是 <code>POSIX NFA</code></p>
<p style="padding-left: 40px;">正则表达式 <code>X(.+)+X</code>，文本 <code>XxX==============</code></p>
<p style="padding-left: 40px;">如果出现灾难性回溯，基本能确定是 <code>POSIX NFA</code></p>
<section>          但是可能存在 <code>DFA</code> 和 <code>NFA</code> 两种引擎的混合的工具</section>
<h1 data-lines="2" data-sign="9bc1fafddbe90a5a4791ca9bb0974a7e12"><strong>细品 NFA 回溯</strong></h1>
<section>上文提到，<code>NFA</code> 具有回溯的能力，该能力是一把双刃剑</section>
<section>因为回溯会增加匹配的步骤，步骤过量会导致 <code>CPU</code> 使用率飙升</section>
<section>正所谓</section>
<section><img class="img_loading" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片" crossorigin="anonymous" data-ratio="0.6134751773049646" data-src="https://mmbiz.qpic.cn/mmbiz_png/DKcPurxib9LyVtx3JcZ5picQencS6ttxmZBibbBvZ4XLcr7JTgGK3ialgicyciaa7RQVlXAjynich3DhWOVZTzC5mBzHA/640?wx_fmt=png" data-type="png" data-w="564" /><a href="http://cdc.tencent.com/2021/06/22/%e8%a7%85%e8%bf%b9%e5%af%bb%e8%b8%aa%e4%b9%8b%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f/640-6/" rel="attachment wp-att-11487"><img loading="lazy" class=" wp-image-11487 alignnone" src="http://cdc.tencent.com/wp-content/uploads/2021/06/640-1.png" alt="" width="383" height="235" /></a></section>
<section>因此了解回溯出现的场景十分有必要</section>
<h2 data-lines="2" data-sign="6411206c0c8846fff2cce1b1bd2f895422"><strong>常见场景</strong></h2>
<h3 data-lines="2" data-sign="88fb82a1f4c53686a2bb574ccc1e0d5f32"><strong>贪婪模式</strong></h3>
<ul class="list-paddingleft-2">
<li>
<section>过程</section>
</li>
</ul>
<section style="padding-left: 40px;"><a href="http://cdc.tencent.com/2021/06/22/%e8%a7%85%e8%bf%b9%e5%af%bb%e8%b8%aa%e4%b9%8b%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f/640-7/" rel="attachment wp-att-11488"><img loading="lazy" class=" wp-image-11488 alignnone" src="http://cdc.tencent.com/wp-content/uploads/2021/06/640-2.gif" alt="" width="479" height="280" srcset="https://cdc.tencent.com/wp-content/uploads/2021/06/640-2.gif 1079w, https://cdc.tencent.com/wp-content/uploads/2021/06/640-2-768x448.gif 768w" sizes="(max-width: 479px) 100vw, 479px" /></a><img class="rich_pages img_loading __bg_gif" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片" data-ratio="0.583625730994152" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_gif/DKcPurxib9LygFkm16xzwt8fSmsfApubKQuGnRGZGzIY1PtWn2OlJ5VaGfibNzlWpTfuic0w5QEiaYPIhXfSlRicL4A/640?wx_fmt=gif" data-type="gif" data-w="1710" data-order="2" /></section>
<ul class="list-paddingleft-2">
<li>
<section>关键点</section>
</li>
</ul>
<section style="padding-left: 40px;">1.贪婪，每次都尽可能多标绿匹配的内容。</section>
<section style="padding-left: 40px;"><img class="rich_pages img_loading" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片" crossorigin="anonymous" data-ratio="0.30703125" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/DKcPurxib9LyVtx3JcZ5picQencS6ttxmZhY0h8HXlEq67ASZE3yqdcd3RhALBudTPXZs1lUyHSK70en39iaxSkUw/640?wx_fmt=png" data-type="png" data-w="1280" /><a href="http://cdc.tencent.com/2021/06/22/%e8%a7%85%e8%bf%b9%e5%af%bb%e8%b8%aa%e4%b9%8b%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f/640-8/" rel="attachment wp-att-11489"><img loading="lazy" class=" wp-image-11489 alignnone" src="http://cdc.tencent.com/wp-content/uploads/2021/06/640-2.png" alt="" width="563" height="173" srcset="https://cdc.tencent.com/wp-content/uploads/2021/06/640-2.png 1080w, https://cdc.tencent.com/wp-content/uploads/2021/06/640-2-768x236.png 768w" sizes="(max-width: 563px) 100vw, 563px" /></a></section>
<p style="padding-left: 40px;">2.回溯。当正则需要匹配下一个文本内容时候，发现不匹配，文本只能回退一步。</p>
<section style="padding-left: 40px;"><img class="img_loading" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片" crossorigin="anonymous" data-ratio="0.8817365269461078" data-src="https://mmbiz.qpic.cn/mmbiz_png/DKcPurxib9LyVtx3JcZ5picQencS6ttxmZNo4h8NOCSxtbHYTZmLs6Dj7UiaLtdFejIbrVNY19b7GbWzGljp3ChtA/640?wx_fmt=png" data-type="png" data-w="1336" /><a href="http://cdc.tencent.com/2021/06/22/%e8%a7%85%e8%bf%b9%e5%af%bb%e8%b8%aa%e4%b9%8b%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f/640-9/" rel="attachment wp-att-11490"><img loading="lazy" class=" wp-image-11490 alignnone" src="http://cdc.tencent.com/wp-content/uploads/2021/06/640-3.png" alt="" width="561" height="495" srcset="https://cdc.tencent.com/wp-content/uploads/2021/06/640-3.png 1080w, https://cdc.tencent.com/wp-content/uploads/2021/06/640-3-768x677.png 768w" sizes="(max-width: 561px) 100vw, 561px" /></a></section>
<h3 data-lines="1" data-sign="66c19b56d2acc186918fbe67dfaf429131"><strong>惰性模式</strong></h3>
<ul class="list-paddingleft-2">
<li>过程</li>
</ul>
<section style="padding-left: 40px;"><img class="rich_pages img_loading __bg_gif" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片" data-ratio="0.5843091334894613" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_gif/DKcPurxib9LygFkm16xzwt8fSmsfApubKwS1ccQQ5J7p84oBX0xm5ibJOY441Mz9RZ0t0OJgjYzichiaeO9fn9ibZ0A/640?wx_fmt=gif" data-type="gif" data-w="1708" data-order="3" /><a href="http://cdc.tencent.com/2021/06/22/%e8%a7%85%e8%bf%b9%e5%af%bb%e8%b8%aa%e4%b9%8b%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f/640-10/" rel="attachment wp-att-11491"><img loading="lazy" class=" wp-image-11491 alignnone" src="http://cdc.tencent.com/wp-content/uploads/2021/06/640-3.gif" alt="" width="480" height="280" srcset="https://cdc.tencent.com/wp-content/uploads/2021/06/640-3.gif 1080w, https://cdc.tencent.com/wp-content/uploads/2021/06/640-3-768x449.gif 768w" sizes="(max-width: 480px) 100vw, 480px" /></a></section>
<ul class="list-paddingleft-2">
<li>关键点</li>
</ul>
<section style="padding-left: 40px;">1.懒惰，每次尽可能少标绿匹配的内容。</section>
<section style="padding-left: 40px;"><a href="http://cdc.tencent.com/2021/06/22/%e8%a7%85%e8%bf%b9%e5%af%bb%e8%b8%aa%e4%b9%8b%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f/640-11/" rel="attachment wp-att-11492"><img loading="lazy" class=" wp-image-11492 alignnone" src="http://cdc.tencent.com/wp-content/uploads/2021/06/640-4.png" alt="" width="541" height="168" srcset="https://cdc.tencent.com/wp-content/uploads/2021/06/640-4.png 1080w, https://cdc.tencent.com/wp-content/uploads/2021/06/640-4-768x238.png 768w" sizes="(max-width: 541px) 100vw, 541px" /></a></section>
<section><img class="img_loading" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片" crossorigin="anonymous" data-ratio="0.3097744360902256" data-src="https://mmbiz.qpic.cn/mmbiz_png/DKcPurxib9LyVtx3JcZ5picQencS6ttxmZI2y884uyaZuXoTAfJwTsXbvftM6mu9StIgLX7dGPZ0p8hcOYQ4ELlw/640?wx_fmt=png" data-type="png" data-w="1330" /></section>
<section style="padding-left: 40px;">2.回溯。当正则需要匹配下一个文本内容时候，发现不匹配，文本只能回退一步。</section>
<section style="padding-left: 40px;"><img class="img_loading" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片" crossorigin="anonymous" data-ratio="0.9004524886877828" data-src="https://mmbiz.qpic.cn/mmbiz_png/DKcPurxib9LyVtx3JcZ5picQencS6ttxmZ2V3VXwKMNBsDaeRJH6JvKVEbxq3bzErHvziaXhqmWva74M0DJNL9lBw/640?wx_fmt=png" data-type="png" data-w="1326" /><a href="http://cdc.tencent.com/2021/06/22/%e8%a7%85%e8%bf%b9%e5%af%bb%e8%b8%aa%e4%b9%8b%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f/640-12/" rel="attachment wp-att-11493"><img loading="lazy" class=" wp-image-11493 alignnone" src="http://cdc.tencent.com/wp-content/uploads/2021/06/640-5.png" alt="" width="549" height="495" srcset="https://cdc.tencent.com/wp-content/uploads/2021/06/640-5.png 1080w, https://cdc.tencent.com/wp-content/uploads/2021/06/640-5-768x691.png 768w" sizes="(max-width: 549px) 100vw, 549px" /></a></section>
<h3 data-lines="2" data-sign="73e0299c2fb3a564af0a7cff4254054232"><strong>分组模式</strong></h3>
<ul class="list-paddingleft-2">
<li>过程</li>
</ul>
<section style="padding-left: 40px;"><a href="http://cdc.tencent.com/2021/06/22/%e8%a7%85%e8%bf%b9%e5%af%bb%e8%b8%aa%e4%b9%8b%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f/640-13/" rel="attachment wp-att-11494"><img loading="lazy" class=" wp-image-11494 alignnone" src="http://cdc.tencent.com/wp-content/uploads/2021/06/640-4.gif" alt="" width="479" height="280" srcset="https://cdc.tencent.com/wp-content/uploads/2021/06/640-4.gif 1079w, https://cdc.tencent.com/wp-content/uploads/2021/06/640-4-768x449.gif 768w" sizes="(max-width: 479px) 100vw, 479px" /></a><img class="rich_pages img_loading __bg_gif" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片" data-ratio="0.5847953216374269" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_gif/DKcPurxib9LygFkm16xzwt8fSmsfApubKsvfgQEiavYM14HowiaSjmMBULic90GveuuqQGeDDFUx53bFpR2z5A1wJQ/640?wx_fmt=gif" data-type="gif" data-w="1710" data-order="4" /></section>
<ul class="list-paddingleft-2">
<li>关键点</li>
</ul>
<section style="padding-left: 40px;">1.分组，按照分支的顺序逐个匹配。</section>
<section style="padding-left: 40px;"><a href="http://cdc.tencent.com/2021/06/22/%e8%a7%85%e8%bf%b9%e5%af%bb%e8%b8%aa%e4%b9%8b%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f/640-14/" rel="attachment wp-att-11495"><img loading="lazy" class=" wp-image-11495 alignnone" src="http://cdc.tencent.com/wp-content/uploads/2021/06/640.jpeg" alt="" width="319" height="193" /></a></section>
<section><img class="rich_pages img_loading" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片" crossorigin="anonymous" data-croporisrc="https://mmbiz.qlogo.cn/mmbiz_png/DKcPurxib9LyVtx3JcZ5picQencS6ttxmZENg4knZsU9uEbA1QvHXQJMKwu4obaIPmo2rTheibmya3dxeHLajI2PQ/0?wx_fmt=png" data-cropx1="4.622837370242214" data-cropx2="654.1314878892733" data-cropy1="1.1557093425605538" data-cropy2="395.2525951557094" data-ratio="0.6061538461538462" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/DKcPurxib9LyVtx3JcZ5picQencS6ttxmZCTs6z4gSuXAFufojX9krbVJK8ew0PeQe2ibjfFQzA8uStria7VokiamZg/640?wx_fmt=jpeg" data-type="jpeg" data-w="650" /></section>
<section style="padding-left: 40px;">2.回溯。当正则需要匹配下一个文本内容时候，发现不匹配，文本只能回退一步。</section>
<section style="padding-left: 40px;"><a href="http://cdc.tencent.com/2021/06/22/%e8%a7%85%e8%bf%b9%e5%af%bb%e8%b8%aa%e4%b9%8b%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f/640-15/" rel="attachment wp-att-11496"><img loading="lazy" class=" wp-image-11496 alignnone" src="http://cdc.tencent.com/wp-content/uploads/2021/06/640-6.png" alt="" width="510" height="461" srcset="https://cdc.tencent.com/wp-content/uploads/2021/06/640-6.png 1080w, https://cdc.tencent.com/wp-content/uploads/2021/06/640-6-768x695.png 768w" sizes="(max-width: 510px) 100vw, 510px" /></a></section>
<section>&gt; 关于什么是贪婪模式，懒惰模式，独占模式，分组模式 不在这里展开详细叙述，留待下一次讲解</section>
<h2 data-lines="2" data-sign="4c0c51ff9b4a44ce303b6fabb312c78d22"><strong>实（踩）战（坑）例子</strong></h2>
<h3 data-lines="2" data-sign="022a172ca57e402b152d1794b3719aeb32"><strong>检验 商店名字 地址是否合法</strong></h3>
<ul class="list-paddingleft-2">
<li>背景</li>
</ul>
<section style="padding-left: 40px;">检验 商店名字 地址是否合法，规则：<br />
1.英文字母大小写 2.数字 3. 越南文 4.一些特殊字符，如 <code>&amp;</code>，<code>-</code>，<code>_</code> 等使用以下正则作示例：</section>
<section style="padding-left: 40px;"><code>^([A-Za-z0-9._()&amp;'\- ]|[aAàÀảẢãÃáÁạẠăĂằẰẳẲẵẴắẮặẶâÂầẦẩẨẫẪấẤậẬbBcCdDđĐeEèÈẻẺẽẼéÉẹẸêÊềỀểỂễỄếẾệỆfFgGhHiIìÌỉỈĩĨíÍịỊjJkKlLmMnNoOòÒỏỎõÕóÓọỌôÔồỒổỔỗỖốỐộỘơƠờỜởỞỡỠớỚợỢpPqQrRsStTuUùÙủỦũŨúÚụỤưƯừỪửỬữỮứỨựỰvVwWxXyYỳỲỷỶỹỸýÝỵỴzZ])+$</code></section>
<ul class="list-paddingleft-2">
<li>
<section>调试</section>
</li>
</ul>
<p style="padding-left: 40px;">我们使用正则验证工具(regex101)进行调试</p>
<section style="padding-left: 40px;">1.文本：<code>this is good</code></section>
<section style="padding-left: 40px;"><a href="http://cdc.tencent.com/2021/06/22/%e8%a7%85%e8%bf%b9%e5%af%bb%e8%b8%aa%e4%b9%8b%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f/640-16/" rel="attachment wp-att-11497"><img loading="lazy" class=" wp-image-11497 alignnone" src="http://cdc.tencent.com/wp-content/uploads/2021/06/640-7.png" alt="" width="574" height="184" srcset="https://cdc.tencent.com/wp-content/uploads/2021/06/640-7.png 1080w, https://cdc.tencent.com/wp-content/uploads/2021/06/640-7-768x246.png 768w" sizes="(max-width: 574px) 100vw, 574px" /></a></section>
<section><img class="img_loading" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片" crossorigin="anonymous" data-ratio="0.3202614379084967" data-src="https://mmbiz.qpic.cn/mmbiz_png/DKcPurxib9LyVtx3JcZ5picQencS6ttxmZ5WltVy1fOrnZOsFmTtOhlaHgTyictgrTGQ4LKOsI3qHboL5IcDhzCWg/640?wx_fmt=png" data-type="png" data-w="1530" /></section>
<section style="padding-left: 40px;">2.文本：<code>this is good，</code></section>
<section style="padding-left: 40px;"><a href="http://cdc.tencent.com/2021/06/22/%e8%a7%85%e8%bf%b9%e5%af%bb%e8%b8%aa%e4%b9%8b%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f/640-17/" rel="attachment wp-att-11498"><img loading="lazy" class=" wp-image-11498 alignnone" src="http://cdc.tencent.com/wp-content/uploads/2021/06/640-8.png" alt="" width="578" height="173" srcset="https://cdc.tencent.com/wp-content/uploads/2021/06/640-8.png 1080w, https://cdc.tencent.com/wp-content/uploads/2021/06/640-8-768x230.png 768w" sizes="(max-width: 578px) 100vw, 578px" /></a></section>
<section><img class="img_loading" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片" crossorigin="anonymous" data-src="https://mmbiz.qpic.cn/mmbiz_png/DKcPurxib9LyVtx3JcZ5picQencS6ttxmZsDd9qwZibuRPLhVM7biazQa4bZTzvLUABbdXiaz8YWfpjWrpckcqXAhuA/640?wx_fmt=png" data-type="png" data-ratio="0.29907407407407405" data-w="1080" /></section>
<section style="padding-left: 40px;">发现输入 <code>this is good，</code> 竟然要多达 17599 步才完成匹配</section>
<section style="padding-left: 40px;"><a href="http://cdc.tencent.com/2021/06/22/%e8%a7%85%e8%bf%b9%e5%af%bb%e8%b8%aa%e4%b9%8b%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f/640-18/" rel="attachment wp-att-11499"><img loading="lazy" class=" wp-image-11499 alignnone" src="http://cdc.tencent.com/wp-content/uploads/2021/06/640-9.png" alt="" width="194" height="186" /></a></section>
<section><img class="img_loading" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片" crossorigin="anonymous" data-ratio="0.9593023255813954" data-src="https://mmbiz.qpic.cn/mmbiz_png/DKcPurxib9LyVtx3JcZ5picQencS6ttxmZNNIHWxI9yiao5d6GMPquZriam71FORzmRHoTTTxeXM6clHx32vgBicOvQ/640?wx_fmt=png" data-type="png" data-w="344" /></section>
<section style="padding-left: 40px;">3.抽丝剥茧</section>
<section style="padding-left: 40px;">上述的正则表达式看上去写得很复杂，实际可以简化一下：</section>
<section style="padding-left: 40px;"><code>^([符合要求的组成1]|[符合要求的组成2])+$</code></section>
<section style="padding-left: 40px;">能发现正则表达式中有 + 出现，意味着有贪婪匹配，可能会有大量回溯</section>
<section style="padding-left: 40px;">利用 regex101 工具中的调试功能，发现当到 30+ 步数，就开始进行回溯</section>
<section style="padding-left: 40px;"><img class="img_loading" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片" crossorigin="anonymous" data-ratio="0.27666399358460303" data-src="https://mmbiz.qpic.cn/mmbiz_png/DKcPurxib9LyVtx3JcZ5picQencS6ttxmZt8q1u9IHVAQrC0RZxzicgc8ep7FDKXF24qZTBicZx9Z1cb5M8nmdezcQ/640?wx_fmt=png" data-type="png" data-w="2494" /><a href="http://cdc.tencent.com/2021/06/22/%e8%a7%85%e8%bf%b9%e5%af%bb%e8%b8%aa%e4%b9%8b%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f/640-19/" rel="attachment wp-att-11500"><img loading="lazy" class=" wp-image-11500 alignnone" src="http://cdc.tencent.com/wp-content/uploads/2021/06/640-10.png" alt="" width="625" height="173" srcset="https://cdc.tencent.com/wp-content/uploads/2021/06/640-10.png 1080w, https://cdc.tencent.com/wp-content/uploads/2021/06/640-10-768x213.png 768w" sizes="(max-width: 625px) 100vw, 625px" /></a></section>
<section style="padding-left: 40px;">我们尝试将贪婪模式改成独占模式，即修改为：</section>
<section style="padding-left: 40px;"><code>^([A-Za-z0-9._()&amp;'\- ]|[aAàÀảẢãÃáÁạẠăĂằẰẳẲẵẴắẮặẶâÂầẦẩẨẫẪấẤậẬbBcCdDđĐeEèÈẻẺẽẼéÉẹẸêÊềỀểỂễỄếẾệỆfFgGhHiIìÌỉỈĩĨíÍịỊjJkKlLmMnNoOòÒỏỎõÕóÓọỌôÔồỒổỔỗỖốỐộỘơƠờỜởỞỡỠớỚợỢpPqQrRsStTuUùÙủỦũŨúÚụỤưƯừỪửỬữỮứỨựỰvVwWxXyYỳỲỷỶỹỸýÝỵỴzZ])++$</code></section>
<section style="padding-left: 40px;">再尝试：</section>
<section style="padding-left: 40px;"><img class="img_loading" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片" crossorigin="anonymous" data-ratio="0.30183727034120733" data-src="https://mmbiz.qpic.cn/mmbiz_png/DKcPurxib9LyVtx3JcZ5picQencS6ttxmZOcwMlBu95G70ibOKUmJA8icOZAnLZNtLEFLP1xEo2Xupsl9KFWbYzPFQ/640?wx_fmt=png" data-type="png" data-w="1524" /><a href="http://cdc.tencent.com/2021/06/22/%e8%a7%85%e8%bf%b9%e5%af%bb%e8%b8%aa%e4%b9%8b%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f/640-20/" rel="attachment wp-att-11501"><img loading="lazy" class=" wp-image-11501 alignnone" src="http://cdc.tencent.com/wp-content/uploads/2021/06/640-11.png" alt="" width="636" height="192" srcset="https://cdc.tencent.com/wp-content/uploads/2021/06/640-11.png 1080w, https://cdc.tencent.com/wp-content/uploads/2021/06/640-11-768x232.png 768w" sizes="(max-width: 636px) 100vw, 636px" /></a></section>
<section style="padding-left: 40px;">改为独占模式后，匹配步数锐减到 29 步</section>
<p style="padding-left: 40px;">&gt; 使用独占模式，需要注意两点：1. 是否满足业务需求；2. 使用的编程语言是否支持</p>
<ul class="list-paddingleft-2">
<li>再优化</li>
</ul>
<section style="padding-left: 40px;">正则表达千万条，还有其他优化的方案</section>
<section style="padding-left: 40px;">在原有 <code>^([A-Za-z0-9._()&amp;'\- ]|[aAàÀảẢãÃáÁạẠăĂằẰẳẲẵẴắẮặẶâÂầẦẩẨẫẪấẤậẬbBcCdDđĐeEèÈẻẺẽẼéÉẹẸêÊềỀểỂễỄếẾệỆfFgGhHiIìÌỉỈĩĨíÍịỊjJkKlLmMnNoOòÒỏỎõÕóÓọỌôÔồỒổỔỗỖốỐộỘơƠờỜởỞỡỠớỚợỢpPqQrRsStTuUùÙủỦũŨúÚụỤưƯừỪửỬữỮứỨựỰvVwWxXyYỳỲỷỶỹỸýÝỵỴzZ])+$ </code>基础上优化</section>
<ul class="list-paddingleft-2">
<li>移除重复的字母（不要在多选择分支中，出现重复的元素）</li>
</ul>
<section style="padding-left: 40px;"><code>^([0-9._()&amp;'\- ]|[aAàÀảẢãÃáÁạẠăĂằẰẳẲẵẴắẮặẶâÂầẦẩẨẫẪấẤậẬbBcCdDđĐeEèÈẻẺẽẼéÉẹẸêÊềỀểỂễỄếẾệỆfFgGhHiIìÌỉỈĩĨíÍịỊjJkKlLmMnNoOòÒỏỎõÕóÓọỌôÔồỒổỔỗỖốỐộỘơƠờỜởỞỡỠớỚợỢpPqQrRsStTuUùÙủỦũŨúÚụỤưƯừỪửỬữỮứỨựỰvVwWxXyYỳỲỷỶỹỸýÝỵỴzZ])+$</code></section>
<section style="padding-left: 40px;"><img class="img_loading" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片" crossorigin="anonymous" data-ratio="0.3470744680851064" data-src="https://mmbiz.qpic.cn/mmbiz_png/DKcPurxib9LyVtx3JcZ5picQencS6ttxmZjycqzibW7G1sYupXkCrSpcMBiar69KU3kBKlYTRLNLaIicPAL8jMPrPBw/640?wx_fmt=png" data-type="png" data-w="1504" /><a href="http://cdc.tencent.com/2021/06/22/%e8%a7%85%e8%bf%b9%e5%af%bb%e8%b8%aa%e4%b9%8b%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f/640-20/" rel="attachment wp-att-11501"><img loading="lazy" class=" wp-image-11501 alignnone" src="http://cdc.tencent.com/wp-content/uploads/2021/06/640-11.png" alt="" width="639" height="193" srcset="https://cdc.tencent.com/wp-content/uploads/2021/06/640-11.png 1080w, https://cdc.tencent.com/wp-content/uploads/2021/06/640-11-768x232.png 768w" sizes="(max-width: 639px) 100vw, 639px" /></a></section>
<ul class="list-paddingleft-2">
<li>移除多选分支选择结构（直接用中括号表示多选一）</li>
</ul>
<section style="padding-left: 40px;"><code>^([A-Za-z0-9._()&amp;'\- aAàÀảẢãÃáÁạẠăĂằẰẳẲẵẴắẮặẶâÂầẦẩẨẫẪấẤậẬbBcCdDđĐeEèÈẻẺẽẼéÉẹẸêÊềỀểỂễỄếẾệỆfFgGhHiIìÌỉỈĩĨíÍịỊjJkKlLmMnNoOòÒỏỎõÕóÓọỌôÔồỒổỔỗỖốỐộỘơƠờỜởỞỡỠớỚợỢpPqQrRsStTuUùÙủỦũŨúÚụỤưƯừỪửỬữỮứỨựỰvVwWxXyYỳỲỷỶỹỸýÝỵỴzZ])+$</code></section>
<section style="padding-left: 40px;"><img class="img_loading" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片" crossorigin="anonymous" data-ratio="0.2954248366013072" data-src="https://mmbiz.qpic.cn/mmbiz_png/DKcPurxib9LyVtx3JcZ5picQencS6ttxmZIwPKYiadyibDWvUdt5qtLFUwwSEe3AWHibsmRySwzibngpjEINU8eUbIdA/640?wx_fmt=png" data-type="png" data-w="1530" /><a href="http://cdc.tencent.com/2021/06/22/%e8%a7%85%e8%bf%b9%e5%af%bb%e8%b8%aa%e4%b9%8b%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f/640-21/" rel="attachment wp-att-11502"><img loading="lazy" class=" wp-image-11502 alignnone" src="http://cdc.tencent.com/wp-content/uploads/2021/06/640-12.png" alt="" width="657" height="194" srcset="https://cdc.tencent.com/wp-content/uploads/2021/06/640-12.png 1080w, https://cdc.tencent.com/wp-content/uploads/2021/06/640-12-768x227.png 768w" sizes="(max-width: 657px) 100vw, 657px" /></a></section>
<h3 data-lines="2" data-sign="8951cb7ae121f5d258be997ab02aa4fe32"><strong>检验 URL 地址是否合法</strong></h3>
<ul class="list-paddingleft-2">
<li>背景</li>
</ul>
<p style="padding-left: 40px;" data-lines="2" data-sign="8951cb7ae121f5d258be997ab02aa4fe32">检验 <code>URL</code> 地址是否合法，规则如下：</p>
<section style="padding-left: 40px;">1.校验协议 2. 校验域名 3. 校验参数使用以下正则作示例：<br />
<code>^([hH][tT]{2}[pP]:\/\/|[hH][tT]{2}[pP][sS]:\/\/)(([A-Za-z0-9-~]+).)+([A-Za-z0-9-~\\\/])+$</code></section>
<ul class="list-paddingleft-2">
<li>调试</li>
</ul>
<section style="padding-left: 40px;">1.文本：</section>
<section style="padding-left: 40px;"><code>http://www.fapiao.com/index.html</code></section>
<section style="padding-left: 40px;"><img class="img_loading" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片" crossorigin="anonymous" data-ratio="0.2751322751322751" data-src="https://mmbiz.qpic.cn/mmbiz_png/DKcPurxib9LyVtx3JcZ5picQencS6ttxmZNC2KOqyiaOQJlCIyHfRzS7u3dXz7BQmEYd1VLGbzqicGgiaIDcvEDC82g/640?wx_fmt=png" data-type="png" data-w="1512" /><a href="http://cdc.tencent.com/2021/06/22/%e8%a7%85%e8%bf%b9%e5%af%bb%e8%b8%aa%e4%b9%8b%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f/640-22/" rel="attachment wp-att-11503"><img loading="lazy" class=" wp-image-11503 alignnone" src="http://cdc.tencent.com/wp-content/uploads/2021/06/640-13.png" alt="" width="684" height="188" srcset="https://cdc.tencent.com/wp-content/uploads/2021/06/640-13.png 1080w, https://cdc.tencent.com/wp-content/uploads/2021/06/640-13-768x211.png 768w" sizes="(max-width: 684px) 100vw, 684px" /></a></section>
<p style="padding-left: 40px;">2.文本：</p>
<section style="padding-left: 40px;"><code>http://www.fapiao.com/dzfp-web/pdf/download?request=6e7JGm38jfjghVrv4ILd-kEn64HcUX4qL4a4qJ4-CHLmqVnenXC692m74H5oxkjgdsYazxcUmfcOH2fAfY1Vw__%5EDadIfJgiEf</code></section>
<section style="padding-left: 40px;"><img class="img_loading" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片" crossorigin="anonymous" data-ratio="0.31084656084656087" data-src="https://mmbiz.qpic.cn/mmbiz_png/DKcPurxib9LyVtx3JcZ5picQencS6ttxmZ08BF7vE6icAK7zQtI9GDL4FVicRemOjJzZXT0hGpboqN7mLlZ9gLXsJA/640?wx_fmt=png" data-type="png" data-w="1512" /><a href="http://cdc.tencent.com/2021/06/22/%e8%a7%85%e8%bf%b9%e5%af%bb%e8%b8%aa%e4%b9%8b%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f/640-23/" rel="attachment wp-att-11504"><img loading="lazy" class=" wp-image-11504 alignnone" src="http://cdc.tencent.com/wp-content/uploads/2021/06/640-14.png" alt="" width="698" height="217" srcset="https://cdc.tencent.com/wp-content/uploads/2021/06/640-14.png 1080w, https://cdc.tencent.com/wp-content/uploads/2021/06/640-14-768x239.png 768w" sizes="(max-width: 698px) 100vw, 698px" /></a></section>
<section style="padding-left: 40px;">发现输入案例后出现 <code>catastrophic backgracking （灾难性回溯）</code>，</section>
<p style="padding-left: 40px;"><img class="rich_pages img_loading" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片" crossorigin="anonymous" data-ratio="1" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/DKcPurxib9LygFkm16xzwt8fSmsfApubKcSQQI1UI8veFPibMhNT7JibFsz8qsibYXIkQexrHlufFvhWMCBGibtPxgQ/640?wx_fmt=png" data-type="png" data-w="300" /><a href="http://cdc.tencent.com/2021/06/22/%e8%a7%85%e8%bf%b9%e5%af%bb%e8%b8%aa%e4%b9%8b%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f/640-24/" rel="attachment wp-att-11505"><img loading="lazy" class=" wp-image-11505 alignnone" src="http://cdc.tencent.com/wp-content/uploads/2021/06/640-15.png" alt="" width="175" height="175" /></a></p>
<ul class="list-paddingleft-2">
<li>
<section>抽丝剥茧</section>
</li>
</ul>
<p style="padding-left: 40px;">重新梳理一下正则表达：</p>
<section style="padding-left: 40px;">1.校验协议：<code>^([hH][tT]{2}[pP]://|[hH][tT]{2}[pP][sS]://)</code></section>
<section style="padding-left: 40px;">2.校验域名：<code>(([A-Za-z0-9-~]+).)+</code></section>
<p style="padding-left: 40px;">3.校验参数：<code>([A-Za-z0-9-~\\/])+$</code></p>
<p style="padding-left: 40px;">看出来，是因为用户传入的内容中存在<code>_%</code> ，那我们修改一下[校验参数]部分，把 <code>_%</code> 加上：</p>
<p style="padding-left: 40px;"><code>^([hH][tT]{2}[pP]:\/\/|[hH][tT]{2}[pP][sS]:\/\/)(([A-Za-z0-9-~]+).)+([A-Za-z0-9-~_%\\\/])+$</code></p>
<section style="padding-left: 40px;"><img class="rich_pages img_loading" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片" crossorigin="anonymous" data-ratio="0.3125" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/DKcPurxib9LygFkm16xzwt8fSmsfApubKxjQNVqEWEwKyfVcvu4k2d2yA6kQDSC0dUGJENzLJWYicqYm4xsDKE0Q/640?wx_fmt=png" data-type="png" data-w="1280" /><a href="http://cdc.tencent.com/2021/06/22/%e8%a7%85%e8%bf%b9%e5%af%bb%e8%b8%aa%e4%b9%8b%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f/640-25/" rel="attachment wp-att-11506"><img loading="lazy" class=" wp-image-11506 alignnone" src="http://cdc.tencent.com/wp-content/uploads/2021/06/640-16.png" alt="" width="715" height="224" srcset="https://cdc.tencent.com/wp-content/uploads/2021/06/640-16.png 1080w, https://cdc.tencent.com/wp-content/uploads/2021/06/640-16-768x240.png 768w" sizes="(max-width: 715px) 100vw, 715px" /></a></section>
<p style="padding-left: 40px;">从 <code>catastrophic backgracking</code> 变成 84 步 完成</p>
<p style="padding-left: 40px;">但问题来了，如果用户在文本中加上 <code>,</code> 呢？</p>
<p style="padding-left: 40px;"><img class="rich_pages img_loading" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片" crossorigin="anonymous" data-ratio="0.9692982456140351" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/DKcPurxib9LygFkm16xzwt8fSmsfApubKC8Fq2dK2xSZuK5Fk2YxyGquAEnicgOgW7GUzLpebx4Vkia49Eibg79tmA/640?wx_fmt=png" data-type="png" data-w="228" /><a href="http://cdc.tencent.com/2021/06/22/%e8%a7%85%e8%bf%b9%e5%af%bb%e8%b8%aa%e4%b9%8b%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f/640-26/" rel="attachment wp-att-11507"><img loading="lazy" class=" wp-image-11507 alignnone" src="http://cdc.tencent.com/wp-content/uploads/2021/06/640-17.png" alt="" width="175" height="170" /></a></p>
<section style="padding-left: 40px;"><a href="http://cdc.tencent.com/2021/06/22/%e8%a7%85%e8%bf%b9%e5%af%bb%e8%b8%aa%e4%b9%8b%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f/640-27/" rel="attachment wp-att-11508"><img loading="lazy" class=" wp-image-11508 alignnone" src="http://cdc.tencent.com/wp-content/uploads/2021/06/640-18.png" alt="" width="729" height="206" srcset="https://cdc.tencent.com/wp-content/uploads/2021/06/640-18.png 1080w, https://cdc.tencent.com/wp-content/uploads/2021/06/640-18-768x217.png 768w" sizes="(max-width: 729px) 100vw, 729px" /></a><img class="rich_pages img_loading" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片" crossorigin="anonymous" data-ratio="0.2828125" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/DKcPurxib9LygFkm16xzwt8fSmsfApubK0gjv7Jp8tb26y4VcCMrl6YfNQiajCWG598Bbk0u5Te1OysicQjuQZbhA/640?wx_fmt=png" data-type="png" data-w="1280" /></section>
<section style="padding-left: 40px;">刚刚的修改仅仅是优化了参数中可能会出现 <code>_%</code> 的情况</section>
<section style="padding-left: 40px;">要想彻底解决问题，可以尝试一下使用独占模式，那需要修改哪部分呢？</section>
<section style="padding-left: 40px;">利用 regex101 工具中的调试功能，能发现当到 60+ 步数，就开始进行回溯</section>
<section style="padding-left: 40px;"><img class="rich_pages img_loading" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片" crossorigin="anonymous" data-ratio="0.2578125" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/DKcPurxib9LygFkm16xzwt8fSmsfApubKCFiaWEXia9eoLIcNRTd8n6CviaU4o8JsnGWVD1TkY9wWBny4UufHibvnNw/640?wx_fmt=png" data-type="png" data-w="1280" /><a href="http://cdc.tencent.com/2021/06/22/%e8%a7%85%e8%bf%b9%e5%af%bb%e8%b8%aa%e4%b9%8b%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f/640-28/" rel="attachment wp-att-11509"><img loading="lazy" class=" wp-image-11509 alignnone" src="http://cdc.tencent.com/wp-content/uploads/2021/06/640-19.png" alt="" width="734" height="189" srcset="https://cdc.tencent.com/wp-content/uploads/2021/06/640-19.png 1080w, https://cdc.tencent.com/wp-content/uploads/2021/06/640-19-768x198.png 768w" sizes="(max-width: 734px) 100vw, 734px" /></a></section>
<section style="padding-left: 40px;">我们可以尝试将[校验域名]修改为独占模式，即修改为：</section>
<section style="padding-left: 40px;"><code>^([hH][tT]{2}[pP]:\/\/|[hH][tT]{2}[pP][sS]:\/\/)(([A-Za-z0-9-~]+).)++([A-Za-z0-9-~\\\/])+$</code></section>
<section style="padding-left: 40px;">再尝试：</section>
<section style="padding-left: 40px;"><img class="rich_pages img_loading" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片" crossorigin="anonymous" data-ratio="0.28125" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/DKcPurxib9LygFkm16xzwt8fSmsfApubKBsqActd2L3cMpy4N18184MnooQRlQ7eOjZrg1AO4VcWAkRvvor8amQ/640?wx_fmt=png" data-type="png" data-w="1280" /><a href="http://cdc.tencent.com/2021/06/22/%e8%a7%85%e8%bf%b9%e5%af%bb%e8%b8%aa%e4%b9%8b%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f/640-29/" rel="attachment wp-att-11510"><img loading="lazy" class=" wp-image-11510 alignnone" src="http://cdc.tencent.com/wp-content/uploads/2021/06/640-20.png" alt="" width="750" height="211" srcset="https://cdc.tencent.com/wp-content/uploads/2021/06/640-20.png 1080w, https://cdc.tencent.com/wp-content/uploads/2021/06/640-20-768x216.png 768w" sizes="(max-width: 750px) 100vw, 750px" /></a></section>
<section style="padding-left: 40px;">改为独占模式后，匹配步数也锐减到 58 步</section>
<h2 data-lines="2" data-sign="7fcf1c76a817e669f73a1d7196ffd7a522"><strong>课代表</strong></h2>
<p>从上面案例可知，避免回溯地狱</p>
<p>1.在满足需求情况下，尝试使用独占模式 -&gt; 案例 1，2 可知</p>
<p>2.移除重复的字母（不要在多选择分支中，出现重复的元素） -&gt; 案例 1 可知</p>
<section>3.移除多选分支选择结构（直接用中括号表示多选一）-&gt; 案例 1 可知</section>
<section>本章节不过多介绍，优化内容，期待下次透析&#8230;.</section>
<h1 data-lines="2" data-sign="35808e79fa5f367a06c83a78b857519c12"><strong>参考资料</strong></h1>
<p data-lines="2" data-type="p" data-sign="66572547a24395855ea7bc49490ef69a"><em>如何理解正则的匹配原理以及优化原则？</em></p>
<p data-lines="2" data-type="p" data-sign="b2cc14ac369c19caf1aeb7e176f69a4c"><em>把握开发利器 — 正则表达式</em></p>
<p data-lines="2" data-type="p" data-sign="60e7df129847a6e992220cd84fb0981d"><em>正则表达式引擎执行原理——从未如此清晰！- SegmentFault 思否</em></p>
<p data-lines="2" data-type="p" data-sign="608ed3f1d65fd677159fe83ddd29d930"><em>正则表达式里的底层原理是什么</em></p>
<p data-lines="2" data-type="p" data-sign="c8485b61e07940889d1c255507a44554"><em>一个由正则表达式引发的血案</em></p>
<hr />
<section></section>
</div>
</div>
</div>
<section></section>
</div>
<section></section>
<div id="page-content" class="rich_media_area_primary">
<div class="rich_media_area_primary_inner">
<div id="img-content" class="rich_media_wrp">
<div id="js_content" class="rich_media_content ">
<section><img class="img_loading" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片" crossorigin="anonymous" data-ratio="0.9252669039145908" data-src="https://mmbiz.qpic.cn/mmbiz_png/DKcPurxib9LyVtx3JcZ5picQencS6ttxmZtBfiaTpOT1etgFe12xoB42WS6fu0VjIygsFIanUickBibyjOk7icACJMlA/640?wx_fmt=png" data-type="png" data-w="2248" /><a href="http://cdc.tencent.com/2021/06/22/%e8%a7%85%e8%bf%b9%e5%af%bb%e8%b8%aa%e4%b9%8b%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f/cdc-blog-%e5%ba%95%e9%83%a8%e4%ba%8c%e7%bb%b4%e7%a0%81-3/" rel="attachment wp-att-11511"><img loading="lazy" class=" wp-image-11511 alignnone" src="http://cdc.tencent.com/wp-content/uploads/2021/06/CDC-Blog-底部二维码.png" alt="" width="1073" height="380" srcset="https://cdc.tencent.com/wp-content/uploads/2021/06/CDC-Blog-底部二维码.png 2880w, https://cdc.tencent.com/wp-content/uploads/2021/06/CDC-Blog-底部二维码-768x272.png 768w, https://cdc.tencent.com/wp-content/uploads/2021/06/CDC-Blog-底部二维码-1536x544.png 1536w, https://cdc.tencent.com/wp-content/uploads/2021/06/CDC-Blog-底部二维码-2048x725.png 2048w" sizes="(max-width: 1073px) 100vw, 1073px" /></a></section>
</div>
<div id="js_sponsor_ad_area"></div>
</div>
</div>
</div>
</div>
</div>
	</div>

	
	<div class="content-more">
		<p>感谢你的阅读，本文出自<a href="http://cdc.tencent.com/"> Tencent CDC</a>，转载时请注明出处，谢谢合作。<br>格式为：Tencent CDC（<a href="https://cdc.tencent.com/2021/06/22/%e8%a7%85%e8%bf%b9%e5%af%bb%e8%b8%aa%e4%b9%8b%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f/">https://cdc.tencent.com/2021/06/22/觅迹寻踪之正则表达式/</a>）</p>
	</div>
	<div class="content-prevnext">
		<p>上一篇: <a href="https://cdc.tencent.com/2021/03/15/web-%e5%ba%94%e7%94%a8%e9%ab%98%e5%b9%b6%e5%8f%91%e7%9a%84%e6%80%9d%e8%80%83%e4%b8%8e%e5%ae%9e%e8%b7%b5/" rel="prev">Web 应用高并发的思考与实践</a></p>
		<p class="next-page">下一篇: <a href="https://cdc.tencent.com/2021/06/23/%e4%ba%a7%e5%93%81%e5%8a%9b%e4%b8%93%e9%a2%98-no-1%ef%bd%9c%e4%bb%8e%e7%94%a8%e6%88%b7%e7%a0%94%e7%a9%b6%e7%9a%84%e8%a7%92%e5%ba%a6%e7%90%86%e8%a7%a3%e4%ba%a7%e5%93%81%e5%8a%9b/" rel="next">产品力专题 NO.1｜从用户研究的角度理解产品力</a></p>
	</div>
</div>


<!--== 分享模块 ==-->
<div class="content-share">
	<ul>
		<li><a href="##" data-action="https://cdc.tencent.com/wp-content/plugins/cdc/cdc_api.php?method=cdc_like" data-post-id="11482" class="btn-like">喜爱</a></li>
		<li>
			<a href="javascript:;" class="btn-share">分享</a>
			<div class="share-list">
				<em>分享到...</em>
				<p class="share-box"></p>
				<button class="close">关闭</button>
			</div>
		</li>
	</ul>
</div>


<link rel="stylesheet" href="https://cdc.tencent.com/wp-content/plugins/coral-comment/static/css/coral_v9.6.6.css" />
<link rel="stylesheet" href="https://cdc.tencent.com/wp-content/plugins/coral-comment/static/css/coralImg.css" />
<style type="text/css">
	#top_reply h1 span{float:left;font-size:13px;margin-left:10px;color:#c2c0c0}
	#top_reply h1 span a:hover{color:#df7070}
	#top_reply h1 span a{color:#c2c0c0;font-size:13px}
</style>
<link href="//mat1.gtimg.com/www/js/niuping/minicss2.css" rel="stylesheet" type="text/css" media="screen"/>
<script src="https://cdc.tencent.com/wp-content/plugins/coral-comment/static/js/sea.js"></script> <!--引入seajs-->


    <div id="mainBody" class="np-frame">

        <!--评论框 -->

        <div id="top_reply">

            <h1 class="np-title">
                <em id='commentTotleNum' target='_blank'></em>
                <strong>评论</strong>
            </h1>
            <a href="javascript:void(0)" class="np-btn np-btn-submit" id="top_post_btn">发表评论</a>
            <div id="commentArea" class='out'>

                <div class="np-reply-box blueLight np-reply-box-active" id="np-reply-box" style="">

                    <div class="np-reply-box-content textarea">
                        <textarea tabindex="1" autocomplete="off" name="content" accesskey="u" id="top_textarea"></textarea>
                    </div>
                    <div id="insertPicList" class="box_inner" style="display: none;">
                        <ul class="insert_piclist cf" style="display: block;">
                            <li class="list_item upAddPic"><a href="javascript:void(0)" class="add_pic"><i class="add">+</i></a>
                                <form action="//upload.coral.qq.com/image/upload" method="post" enctype="multipart/form-data" target="iframe0" id="form10">
                                    <!-- input type="file"  class="add_file" name="picture" accept="image/*"-->
                                    <input name="thrdes" type="hidden" value="insertPicList">
                                    <input name="type" type="hidden" value="1">
                                    <input name="format" type="hidden" value="SCRIPT">
                                    <input name="callback" type="hidden" value="parent.upLoadImg">
                                    <input name="_method" type="hidden" value="put">
                                    <!-- <input name="plat" type="hidden" value="1"> -->
                                    <input name="g_tk" type="hidden" value="">
                                    <input name="code" type="hidden" value="0">
                                    <input name="source" type="hidden" value="1">
                                </form>
                            </li>
                        </ul>
                    </div>

                    <div class="commtSub np-reply-box-footer" id="p_login_btn">
                        <!-- 用户登录模块 -->
                        <div class="np-login" id="loginFlag">
                            <img width="35" height="35" class="np-avatar" src=''>
                            <span class="">
                                <em class="np-user"></em>
                                <a class="" href="//film.qq.com/vip.html" target='_blank'></a>
                            </span>
                            <a href="javascript:void(0)" class="np-btn logout">登出</a>
                        </div>

                        <div class='submitBtn'>
                            <span class="np-tip-error" style="display:none"></span>
                        </div>
                    </div>

                </div>

            </div>

        </div>


        <!--评论显示列表-->

        <div id="content">
            <!-- <ul class="np-nav-tab">
                <li id="myAllComment" class="np-active">全部评论</li>
                <li id="myCowComment">我的评论
                    <span id="popMsg" class="np-tip-num"></span>
                </li>
                <!- -->
            </ul>

            <div id="tab1_allComments">
                <!--页卡一 全部评论-->

                <!-- <div id="order" class="np-order np-btngroup"><a data-sort="time" href="javascript:void(0)" class="np-active">时间</a><a data-sort="quality" href="javascript:void(0)">热度</a>
                </div> -->
                <!--推荐评论-->


                <div id="showNum" class="showNum">

                    <span></span>

                </div>

                <div id='allComments'>

                    <ul class="post-list np-comment-list"></ul>
                    <div class="tipInfo waitting"></div>
                    <!--loadding图标-->

                </div>
                <!-- 全部评论 -->


                <div id="loadMore" class="np-load-more">

                    <span>查看更多评论</span>
                    <em style="display:none">没有更多了</em>

                </div>

            </div>

            <div id="tab2_myComments" class=" my-comments" style="display:none">
                <!--页卡二 我的牛评-->
                <div class="np-btngroup np-btngroup-notice"><a href="javascript:void(0)" id='mytips' class="np-active">提醒</a><a id='mycon' href="javascript:void(0)">评论</a>
                </div>

                <div id="tab3_tips" class='dis'>

                    <div id="my-message" class="my-message">

                        <div class="tipInfo waitting">

                        </div>


                        <ul id="my-message-list" class="post-list np-notice-list">

                        </ul>

                        <div class="np-load-more" id="loadMsgMore" style="display:none">
                            <span>查看更多评论</span>
                            <em style="display:none">没有更多了</em>
                        </div>
                    </div>



                </div>

                <div id="tab4_mycon" style="display:none" class='undis'>


                    <div id="my-notification" class="my-notification ">

                        <div class="tipInfo waitting">

                        </div>
                        <div class="np-person-info np-person-info-weak" id='myuserInfo' style="display:none">
                            <img class="np-avatar" src="">
                            <span class="">
                                <em class="np-user">企鹅先生</em>
                                <a class="" href="" target='_blank'></a>
                            </span>
                            <div>
                                <span class='np-btn-area'>
                                    <em class="a">中国 北京 海淀</em>
                                </span>
                                <span class='np-btn-upvote'>
                                    <em class="b">0</em>
                                </span>
                                <span class='np-btn-reply'>
                                    <em class="c">1</em>
                                </span>
                            </div>
                        </div>
                        <ul id="my-notification-list" class="post-list np-timeline">

                        </ul>


                        <div class="np-load-more" id="loadCmtMore">

                            <span>加载更多</span>
                            <em style="display:none">没有更多了</em>

                        </div>


                    </div>

                </div>

            </div>

        </div>

        <div id="hiddenCon" class="hiddenCon" style="display:none">


        </div>

        <!--弹出举报框-->
        <div class="np-report" id='public_report' style="display:none">
            <div class="report-con">
                <div class="np-report-header">
                    <h4>举报</h4>
                    <a href="javascript:void(0)" class='close'></a>
                </div>
                <div class="np-report-content">
                    <h5>
                        举报此评论的原因</h5>
                    <ul>
                        <li>
                            <input name="impeach_content" id="content1" type="radio" value="1" />
                            <label for="content1">色情淫秽</label>
                        </li>

                        <li>
                            <input name="impeach_content" id="content4" type="radio" value="8" />
                            <label for="content4">骚扰谩骂</label>
                        </li>

                        <li>
                            <input name="impeach_content" id="content1024" type="radio" value="1024" />
                            <label for="content1024">广告欺诈</label>
                        </li>

                        <li>
                            <input name="impeach_content" id="content16384" type="radio" value="2048" />
                            <label for="content16384">反动</label>
                        </li>
                        <li>
                            <input name="impeach_content" id="content0" type="radio" value="0" />
                            <label for="content0">其他</label>
                        </li>
                    </ul>
                    <div>
                        <h6>举报说明（可选）：</h6>
                        <textarea name="impeach_desc" placeholder="请描述该评论的恶意行为" style=" color:#bbb;" id="impeach_desc" type="text" maxlength="200/"></textarea>
                    </div>
                </div>
                <div class="np-report-footer">
                    <a class="np-btn np-report-submit" href="javascript:void(0)">提交</a>
                    <a class="np-btn np-report-cancel" href="javascript:void(0)">取消</a>
                </div>
            </div>
        </div>

        <!--弹出评论框-->
        <div class="pop_reply np-reply-box np-reply-box-inline" id="public_reply" style="display:none">
            <div class="textarea np-reply-box-content">
                <textarea tabindex="1" autocomplete="off" name="content" accesskey="u" id="top_textarea"></textarea>
            </div>
            <div id="insertPicList_reply" class="box_inner" style="display: none;">
                <ul class="insert_piclist cf" style="display: block;">
                    <li class="list_item upAddPic" ><a href="javascript:void(0)" class="add_pic"><i class="add">+</i></a>
                        <form action="//upload.coral.qq.com/image/upload" method="post" enctype="multipart/form-data" target="iframe0" id="form10">
                            <!--input type="file" class="add_file" name="picture" accept="image/*" -->
                            
                            <input name="thrdes" type="hidden" value="insertPicList">
                            <input name="type" type="hidden" value="1">
                            <input name="format" type="hidden" value="SCRIPT">
                            <input name="callback" type="hidden" value="parent.upLoadImg">
                            <input name="_method" type="hidden" value="put">
                            <!-- <input name="plat" type="hidden" value="1"> -->
                            <input name="g_tk" type="hidden" value="">
                            <input name="code" type="hidden" value="0">
                            <input name="source" type="hidden" value="1">
                        </form>
                    </li>
                </ul>
            </div>
           
            <a href="javascript:void(0)" class="submit np-btn np-btn-submit" id="pop_post_btn">发表评论</a>
            <a href="javascript:void(0)" class="np-cancle">取消</a>
        </div>
    </div>

    <!--遮罩层-->
    <div class='maskObj' id='maskObj'>
    </div>
	<script type="text/javascript" src="//mat1.gtimg.com/www/js/jquery/jquery-1.11.1.min.js"></script> <!---jQuery 库文件-->
    <script src="//connect.qq.com/qc_jssdk.js" data-appid="101574781" data-redirecturi="https://cdc.tencent.com/wp-content/plugins/coral-comment/qq_callback.php"></script>

<script>
	coralStaticPath = "https://cdc.tencent.com/wp-content/plugins/coral-comment/static";
	cmt_id = 7015427760;

	seajs.use('coral.init',function(CORAL){
		CORAL.init({
            user_login: "https://cdc.tencent.com/wp-content/plugins/coral-comment/api.php?method=user_login",
			article_commentnum: "https://cdc.tencent.com/wp-content/plugins/coral-comment/api.php?method=article_commentnum", // 获取文章的评论数 OK
			article_comment: "https://cdc.tencent.com/wp-content/plugins/coral-comment/api.php?method=article_comment", // 文章的评论列表接口 OK
			article_hotcomment: "https://cdc.tencent.com/wp-content/plugins/coral-comment/api.php?method=article_hotcomment", // 热评接口 OK
			comment_post: "https://cdc.tencent.com/wp-content/plugins/coral-comment/api.php?method=comment_post", //提交评论 OK
			user_msg: "https://cdc.tencent.com/wp-content/plugins/coral-comment/api.php?method=user_msg", // 用户消息接口 OK
			user_comment: "https://cdc.tencent.com/wp-content/plugins/coral-comment/api.php?method=user_comment", // 用户评论接口 OK
			get_userinfo: "https://cdc.tencent.com/wp-content/plugins/coral-comment/api.php?method=get_userinfo", // 获取当前用户信息 OK
			delete_comment: "https://cdc.tencent.com/wp-content/plugins/coral-comment/api.php?method=delete_comment", //用户删除自己的评论的接口 OK
			dig_comment: "https://cdc.tencent.com/wp-content/plugins/coral-comment/api.php?method=dig_comment", // 点赞接口 OK
			cai_comment: "https://cdc.tencent.com/wp-content/plugins/coral-comment/api.php?method=cai_comment", // 踩接口 OK
			report: "https://cdc.tencent.com/wp-content/plugins/coral-comment/api.php?method=report", // 举报接口 OK
            upload: "https://cdc.tencent.com/wp-content/plugins/coral-comment/api.php?method=upload", // 上传文件接口
            comment_enable: true,
            homePageSize: 50		});
	});
</script>	
<script language="javascript" src="https://cdc.tencent.com/wp-content/plugins/coral-comment/static/tpl/template1.js"></script>  <!--coral-基本方法-->
<script language="javascript" src="https://cdc.tencent.com/wp-content/plugins/coral-comment/static/js/coral.config.js"></script>  <!--coral-基本配置-->
<script language="javascript" src="https://cdc.tencent.com/wp-content/plugins/coral-comment/static/js/coral.base.js"></script>  <!--coral-基本方法 -->
<script language="javascript" src="https://cdc.tencent.com/wp-content/plugins/coral-comment/static/js/coral.center.js"></script>  <!--个人中心代码-->
<script language="javascript" src="https://cdc.tencent.com/wp-content/plugins/coral-comment/static/js/coral.login.js"></script>  <!--登录模块-->
<script language="javascript" src="https://cdc.tencent.com/wp-content/plugins/coral-comment/static/js/coral.img.js"></script>  <!--发布图片模块-->
<script language="javascript" src="https://cdc.tencent.com/wp-content/plugins/coral-comment/static/js/coral.boss.js"></script>  <!--统计代码-->
<script type="text/javascript" src="https://cdc.tencent.com/wp-content/plugins/coral-comment/static/js/coral_v3.6.29.js"></script> <!--入口js文件-->
<script type="text/javascript" src="https://cdc.tencent.com/wp-content/plugins/coral-comment/static/js/coral.callback.js"></script>
<script type="text/javascript" src="https://cdc.tencent.com/wp-content/plugins/coral-comment/static/js/coral.init.js"></script>
<script>
    $("#mainBody").on("click", ".np-cancle", function(){$("#public_reply").hide()});
</script>

	</div>

	<!-- 详情页侧边栏 -->
	
	<!-- 详情页侧边栏 -->

	<div class="sidebar">
		<div class="target">
			<h3>标签</h3>
			<p>
								<a href="https://cdc.tencent.com?cat=522#search-result">技术研发</a>
								
				
									<a href="https://cdc.tencent.com?cat=522&tag=&s=DFA#search-result">DFA</a>
									<a href="https://cdc.tencent.com?cat=522&tag=&s=NFA#search-result">NFA</a>
									<a href="https://cdc.tencent.com?cat=522&tag=&s=%E5%88%86%E7%BB%84%E6%A8%A1%E5%BC%8F#search-result">分组模式</a>
									<a href="https://cdc.tencent.com?cat=522&tag=&s=%E5%9B%9E%E6%BA%AF#search-result">回溯</a>
									<a href="https://cdc.tencent.com?cat=522&tag=&s=%E6%87%92%E6%83%B0%E6%A8%A1%E5%BC%8F#search-result">懒惰模式</a>
									<a href="https://cdc.tencent.com?cat=522&tag=&s=%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F#search-result">正则表达式</a>
									<a href="https://cdc.tencent.com?cat=522&tag=&s=%E8%B4%AA%E5%A9%AA%E6%A8%A1%E5%BC%8F#search-result">贪婪模式</a>
							</p>
		</div>
		<div class="relative-read">
			<h3>相关阅读</h3>
			<ul>
							</ul>
		</div>

				<div class="adword">
			<em>在你身边，为你设计II</em>
			<i><a href="http://item.jd.com/11840401.html"><img src="/wp-content/uploads/2016/05/ad_pic-1.jpg" alt="在你身边，为你设计II"></a></i>
		</div>
			</div>
	</div>
<div class="roll-backtop2" id="roll-backtop" style="">返回顶部</div>
<script src="https://cdc.tencent.com/wp-content/themes/cdc10th/js/src/jquery.qrcode.min.js"></script>
<script>
	$(function(){
		var attrUrl =  "https://cdc.tencent.com/?p=11482";
		$('#qrcode').qrcode({width: 170,height: 170,text: attrUrl});
	})
</script>
<script src="https://cdc.tencent.com/wp-content/themes/cdc10th/js/src/share.js"></script>
<script>
	var shareHTML = '<span class="weixin-qrcode"><a href="javascript:;" class="share-item share-weixin" data-type="weixin" title="扫一扫分享到微信">微信</a><div class="qrcode" id="qrcode"></div></span><span><a href="javascript:;" class="share-item share-qzone" data-type="qzone" title="分享到QQ空间">QQ空间</a></span><span><a href="javascript:;" class="share-item share-weibo" data-type="weibo" title="分享到新浪微博">新浪微博</a></span><span><a href="javascript:;" class="share-item share-qqweibo" data-type="qqweibo" title="分享到腾讯微博">腾讯微博</a></span>';
	var articleTit = $('.content-title').find('h3').html();
	ui.shareFactory.create($('.share-box'),{
		type:['weixin','qzone','weibo','qqweibo'],
		text:articleTit
	})
</script>
	<div class="g-footer">
		<div class="g-container">
			<div class="links">
				<div class="links-menu">
					<div class="logo">
						<a href="//cdc.tencent.com/"><img src="https://cdc.tencent.com/wp-content/themes/cdc10th/images/logo_footer@2x.png" alt="腾讯CDC" /></a>
					</div>
					<p class="copyright">Copyright © 1998 - 2021 Tencent. <span>All Rights Reserved. Powered By Wordpress.</span></p>
				</div>
				<div class="links-menu links-menu2">
					<div class='menu-items'><h4>腾讯设计团队</h4><div class="menu-tx-design-container"><ul id="menu-tx-design" class="menu"><li id="menu-item-8939" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8939"><a target="_blank" rel="noopener" href="http://isux.tencent.com">ISUX</a></li>
<li id="menu-item-8941" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8941"><a target="_blank" rel="noopener" href="http://tgideas.qq.com">TGideas</a></li>
<li id="menu-item-8942" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8942"><a target="_blank" rel="noopener" href="http://www.alloyteam.com">AlloyTeam</a></li>
<li id="menu-item-9242" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-9242"><a target="_blank" rel="noopener" href="http://qqfe.org/">FERD</a></li>
</ul></div></div><div class='menu-items'><h4>友情链接</h4><div class="menu-friend-links-container"><ul id="menu-friend-links" class="menu"><li id="menu-item-8933" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8933"><a target="_blank" rel="noopener" href="http://jdc.jd.com">JDC</a></li>
<li id="menu-item-8938" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8938"><a target="_blank" rel="noopener" href="https://ixdc.org/2020/?lang=zh">IXDC2020</a></li>
<li id="menu-item-8934" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8934"><a target="_blank" rel="noopener" href="http://www.ui.cn/">UI中国</a></li>
<li id="menu-item-9878" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-9878"><a target="_blank" rel="noopener" href="http://www.uisdc.com/">优设网</a></li>
<li id="menu-item-10701" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-10701"><a href="http://sicc.tencent.com">SICC</a></li>
<li id="menu-item-10704" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-10704"><a href="https://prowork.qq.com/?ref=CDCyoulian">Prowork</a></li>
<li id="menu-item-11430" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-11430"><a href="https://codesign.qq.com/?utm_source=cdc&#038;utm_medium=youlian">CoDesign</a></li>
</ul></div></div>				</div>
			</div>
		</div>
	</div>
	<!-- <div class="mask-backdrop"></div> -->
	<div class="roll-backtop" id="roll-backtop">返回顶部</div>
	<script type='text/javascript' src='https://cdc.tencent.com/wp-includes/js/wp-embed.min.js?ver=5.7.2' id='wp-embed-js'></script>
	<script src="https://cdc.tencent.com/wp-content/themes/cdc10th/js/src/swiper.min.7f20.js"></script>
	<script src="https://cdc.tencent.com/wp-content/themes/cdc10th/js/main.js"></script>
	<script type="text/javascript">if(window._satellite) _satellite.pageBottom();</script>
</body>
</html>

